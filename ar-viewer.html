<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>AR Viewer Slider</title>
  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background-color: #fff;
      font-family: sans-serif;
    }
    .viewer-container {
      width: 100vw;
      height: 100vh;
      position: relative;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    model-viewer {
      width: 100%;
      height: 100%;
    }
    .slide-number {
      position: absolute;
      top: 10px;
      left: 10px;
      background: rgba(0, 0, 0, 0.6);
      color: #fff;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 14px;
    }
    .nav-buttons {
      position: absolute;
      top: 50%;
      width: 100%;
      display: flex;
      justify-content: space-between;
      transform: translateY(-50%);
      padding: 0 20px;
      box-sizing: border-box;
    }
    .nav-button {
      background: rgba(0, 0, 0, 0.5);
      color: white;
      border: none;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      font-size: 20px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div class="viewer-container">
    <model-viewer id="mainViewer"
      alt="AR Model"
      ar
      auto-rotate
      camera-controls
      shadow-intensity="1"
      ar-modes="scene-viewer webxr quick-look">
    </model-viewer>
    <div class="slide-number" id="slideNumber"></div>
    <div class="nav-buttons">
      <button class="nav-button" onclick="prevSlide()">◀</button>
      <button class="nav-button" onclick="nextSlide()">▶</button>
    </div>
  </div>

  <script>
    const defaultModels = [
      'https://ye-eun-min201.github.io/usdz-hosting/coke01_1.glb',
      'https://ye-eun-min201.github.io/usdz-hosting/coke02_2.glb',
      'https://ye-eun-min201.github.io/usdz-hosting/ramen1.glb'
    ];

    const query = new URLSearchParams(window.location.search);
    const models = query.get('models');
    const modelList = models ? models.split(',').map(name => `https://ye-eun-min201.github.io/usdz-hosting/${name}`) : defaultModels;

    const viewer = document.getElementById('mainViewer');
    const slideLabel = document.getElementById('slideNumber');
    let currentIndex = 0;

    function updateViewer(index) {
      if (index >= 0 && index < modelList.length) {
        viewer.src = modelList[index];
        slideLabel.textContent = `Model ${index + 1} / ${modelList.length}`;
      }
    }

    function nextSlide() {
      if (currentIndex < modelList.length - 1) {
        currentIndex++;
        updateViewer(currentIndex);
      }
    }

    function prevSlide() {
      if (currentIndex > 0) {
        currentIndex--;
        updateViewer(currentIndex);
      }
    }

    // 초기 로드
    updateViewer(currentIndex);
  </script>
</body>
</html>
